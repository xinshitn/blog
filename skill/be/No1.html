<!DOCTYPE HTML>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="shortcut icon" href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/logo_ico_48.ico"
          type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-icon-big.png">
    <link rel="apple-touch-startup-image"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen.png"
          media="screen and (max-device-width: 320px)"/>
    <link rel="apple-touch-startup-image"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen@2x.png"
          media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)"/>
    <link rel="apple-touch-startup-image"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-six.png"
          media="(device-width: 375px)">
    <link rel="apple-touch-startup-image"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-six-plus.png"
          media="(device-width: 414px)">
    <link rel="apple-touch-startup-image" sizes="640x1096"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen@3x.png"/>
    <link rel="apple-touch-startup-image" sizes="1024x748"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-ipad-landscape"
          media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : landscape)"/>
    <link rel="apple-touch-startup-image" sizes="768x1004"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-ipad-portrait.png"
          media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : portrait)"/>
    <link rel="apple-touch-startup-image" sizes="1536x2008"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-ipad-portrait-retina.png"
          media="(device-width: 768px)	and (orientation: portrait)	and (-webkit-device-pixel-ratio: 2)"/>
    <link rel="apple-touch-startup-image" sizes="1496x2048"
          href="http://tiannblog.oss-cn-shanghai.aliyuncs.com/images/splash/splash-screen-ipad-landscape-retina.png"
          media="(device-width: 768px)	and (orientation: landscape)	and (-webkit-device-pixel-ratio: 2)"/>

    <title>清汀驿站</title>

    <link href="../../stylesheets/style.css" rel="stylesheet" type="text/css">
    <link href="../../stylesheets/framework.css" rel="stylesheet" type="text/css">
    <!--<link href="../../stylesheets/owl.theme.css" rel="stylesheet" type="text/css">-->
    <!--<link href="../../stylesheets/swipebox.css" rel="stylesheet" type="text/css">-->
    <link href="../../stylesheets/font-awesome.css" rel="stylesheet" type="text/css">
    <!--<link href="../../stylesheets/animate.css" rel="stylesheet" type="text/css">-->

    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../javascripts/framework.plugins.js"></script>
    <!--<scriunction iniFun($) {-->
                 <!--}-->
    <!--</script>pt type="text/javascript">-->
    <script type="text/javascript" src="../../javascripts/custom.js"></script>
    <style>
        .decoration {
            margin-bottom: 15px;
        }

        .content, .content p {
            margin: 0 10px;
        }

        .header-clear-big {
            height: 40px;
        }

        .header {
            height: 30px;
        }

        .header-navigation, .header-navigation i {
            height: 30px;
            line-height: 30px;
        }

        .header-logo {
            margin-top: 5px;
        }
    </style>
</head>
<body>
<div id="mainDiv">
    <div id="preloader">
        <div id="status">
            <p class="center-text">
                田宁在等你，正在加载页面...
                <em>加载速度就看你的网络咯!</em>
            </p>
        </div>
    </div>

    <div class="header">
        <a href="../../skill_be.html" title="返回" class="header-logo">返回</a>
        <!-- fa-arrow-right,fa-ban,fa-anchor -->
        <a href="#" class="header-navigation"><i class="fa fa-anchor"></i></a>
    </div>
    <div class="header-clear-big"></div>

    <div class="content">
        <div class="container no-bottom">
            <h3 class="center-text">Java读取、创建xml（通过dom方式）</h3>
            <p class="center-text">这个实例，应该可以满足一般的XML创建和解析需求了</p>
            <div class="decoration"></div>
            <h5>创建一个接口：XmlInterface.java</h5>

<pre>
<code class="gline">
    public interface XmlInterface {
        /**
        * 建立XML文档
        * @param fileName 文件全路径名称
        */
        public void createXml(String fileName);
        /**
        * 解析XML文档
        * @param fileName 文件全路径名称
        */
        public void parserXml(String fileName);
    }
</code>
</pre>
            <h5>接口实现：XmlImpl.java</h5>
<pre>
<code class="gline">
    package com.test.xml;

    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.PrintWriter;
    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.parsers.ParserConfigurationException;
    import javax.xml.transform.OutputKeys;
    import javax.xml.transform.Transformer;
    import javax.xml.transform.TransformerConfigurationException;
    import javax.xml.transform.TransformerException;
    import javax.xml.transform.TransformerFactory;
    import javax.xml.transform.dom.DOMSource;
    import javax.xml.transform.stream.StreamResult;
    import org.w3c.dom.Document;
    import org.w3c.dom.Element;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;
    import org.xml.sax.SAXException;

    public class XmlImpl implements XmlInterface{
        private Document document;

        public void init() {
            try {
                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                DocumentBuilder builder = factory.newDocumentBuilder();
                this.document = builder.newDocument();
            } catch (ParserConfigurationException e) {
                System.out.println(e.getMessage());
            }
        }

        public void createXml(String fileName) {
            Element root = this.document.createElement("scores");
            this.document.appendChild(root);
            Element employee = this.document.createElement("employee");
            Element name = this.document.createElement("name");
            name.appendChild(this.document.createTextNode("wangchenyang"));
            employee.appendChild(name);
            Element sex = this.document.createElement("sex");
            sex.appendChild(this.document.createTextNode("m"));
            employee.appendChild(sex);
            Element age = this.document.createElement("age");
            age.appendChild(this.document.createTextNode("26"));
            employee.appendChild(age);
            root.appendChild(employee);
            TransformerFactory tf = TransformerFactory.newInstance();
            try {
                Transformer transformer = tf.newTransformer();
                DOMSource source = new DOMSource(document);
                transformer.setOutputProperty(OutputKeys.ENCODING, "gb2312");
                transformer.setOutputProperty(OutputKeys.INDENT, "yes");
                PrintWriter pw = new PrintWriter(new FileOutputStream(fileName));
                StreamResult result = new StreamResult(pw);
                transformer.transform(source, result);
                System.out.println("生成XML文件成功!");
            } catch (TransformerConfigurationException e) {
                System.out.println(e.getMessage());
            } catch (IllegalArgumentException e) {
                System.out.println(e.getMessage());
            } catch (FileNotFoundException e) {
                System.out.println(e.getMessage());
            } catch (TransformerException e) {
                System.out.println(e.getMessage());
            }
        }

        public void parserXml(String fileName) {
            try {
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document document = db.parse(fileName);

                NodeList employees = document.getChildNodes();
                for (int i = 0; i < employees.getLength(); i++) {
                    Node employee = employees.item(i);
                    NodeList employeeInfo = employee.getChildNodes();
                    for (int j = 0; j < employeeInfo.getLength(); j++) {
                        Node node = employeeInfo.item(j);
                        NodeList employeeMeta = node.getChildNodes();
                        for (int k = 0; k < employeeMeta.getLength(); k++) {
                            System.out.println(employeeMeta.item(k).getNodeName()
                            + ":" + employeeMeta.item(k).getTextContent());
                        }
                    }
                }
                System.out.println("解析完毕");
            } catch (FileNotFoundException e) {
                System.out.println(e.getMessage());
            } catch (ParserConfigurationException e) {
                System.out.println(e.getMessage());
            } catch (SAXException e) {
                System.out.println(e.getMessage());
            } catch (IOException e) {
                System.out.println(e.getMessage());
            }
        }
    }
</code>
</pre>
            <h5>测试</h5>
<pre>
<code class="gline">
    public class Main {
        public static void main(String args[]){
            XmlImpl dd=new XmlImpl();
            String str="D:/grade.xml";
            dd.init();
            dd.createXml(str);    //创建xml
            dd.parserXml(str);    //读取xml
        }
    }
</code>
</pre>
            <h5>结果：</h5>
            <h5>生成xml</h5>
<pre>
<code class="gline">
    &lt;?xml version="1.0" encoding="GB2312"?&gt;
    &lt;scores&gt;
        &lt;employee&gt;
            &lt;name&gt;wangchenyang&lt;/name&gt;
            &lt;sex&gt;m&lt;/sex&gt;
            &lt;age&gt;26&lt;/age&gt;
        &lt;/employee&gt;
    &lt;/scores&gt;
</code>
</pre>
            <h5>读取xml</h5>
<pre>
<code class="gline">
    #text:

    name:wangchenyang
    #text:

    sex:m
    #text:

    age:26
    #text:
</code>
</pre>
            <h5>解析完毕</h5>
        </div>
        <div class="decoration"></div>
    </div>


<!-- Page Footer-->
<div class="footer">
    <div class="footer-socials two-bottom">
        <a href="#" class="footer-share show-share-bottom"><i class="fa fa-share-alt"></i></a>
        <a href="#" class="footer-up"><i class="fa fa-angle-up"></i></a>
    </div>
    <!--<p class="center-text">Copyright 2015. All rights reserved.</p>-->
</div>

<!-- Share Elements-->
<div class="share-bottom">
    <h3>分享页面</h3>

    <div class="share-socials-bottom">
        <a title="微博" onclick="shareWeibo('在这里遇见你');" href="#" target="_blank">
            <i class="fa fa-weibo weibo-color"></i>
            <!--Weibo-->
        </a>

        <a href="#" onclick="shareQQ('在这里遇见你','就那么一个普通的人的普通网站');" title="QQ">
            <i class="fa fa-qq qq-color"></i>
            <!--QQ-->
        </a>
        <a title="微信" target="_blank" href="http://cli.im/api/qrcode">
            <i class="fa fa-weixin weixin-color"></i>
            <!--Weixin-->
        </a>

        <a title="人人" href="#" onclick="shareRenren('在这里遇见你','一个很神奇的个人网站');">
            <i class="fa fa-renren renren-color"></i>
            <!--Renren-->
        </a>
        <a title="短信(限手机)" href="sms:13148383640">
            <i class="fa fa-comment-o sms-color"></i>
            <!--Text-->
        </a>
        <a title="邮件" onclick="shareEmail('在这里遇见你','就那么一个普通的人的普通网站');" href="#">
            <i class="fa fa-envelope-o mail-color"></i>
            <!--Email-->
        </a>
    </div>
    <a href="#" class="close-share-bottom">关闭</a>
</div>
<div class="menu-wrapper-background noScroll"></div>
</div>

</body>



















